<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Portfolio</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500;700&display=swap');

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #000; margin: 0; padding: 0;
            height: 100vh; overflow: hidden;
        }
        .swiper-container-h, .swiper-container-v, .swiper-slide { width: 100%; height: 100%; }
        .swiper-slide {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            position: relative; overflow: hidden;
        }
        .slide-bg {
            position: absolute; left: 0; top: 0;
            width: 130%; height: 130%;
            background-size: cover; background-position: center;
            filter: blur(15px) brightness(0.7);
            z-index: -1; transform: translate(-15%, -15%);
        }
        .artwork-container {
            position: relative; width: 80%; max-width: 400px;
            border-radius: 12px; overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .ratio-portrait { aspect-ratio: 3/4; }
        .ratio-landscape { aspect-ratio: 4/3; }
        .ratio-square { aspect-ratio: 1/1; }
        .artwork-image { width: 100%; height: 100%; object-fit: cover; }
        
        /* Sidebar & Icons */
        .sidebar-menu {
            position: fixed; left: 20px; top: 50%;
            transform: translateY(-50%); z-index: 40;
            display: flex; flex-direction: column; gap: 15px;
        }
        .category-btn {
            width: 45px; height: 45px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px; backdrop-filter: blur(4px);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.85);
        }
        .category-btn svg {
            width: 25px; height: 25px; fill: currentColor;
            opacity: 0.6; transition: all 0.3s ease;
        }
        .icon-mask {
            width: 25px; height: 25px;
            background-color: currentColor;
            -webkit-mask-size: contain; mask-size: contain;
            -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat;
            -webkit-mask-position: center; mask-position: center;
            opacity: 0.6; transition: all 0.3s ease;
        }
        .category-btn.active { border-color: currentColor; background: rgba(255, 255, 255, 0.2); transform: scale(1.1); }
        .category-btn.active svg, .category-btn.active .icon-mask { opacity: 1; }

        /* Themes */
        body.theme-light .category-btn { border-color: rgba(0,0,0,0.2); color: rgba(0,0,0,0.8); } 
        body.theme-dark .category-btn { border-color: rgba(255,255,255,0.3); color: rgba(255,255,255,0.85); }

        /* Floating Text Effect (부드러운 오프화이트) */
        .text-floating {
            color: rgba(255, 255, 255, 0.85) !important; 
            text-shadow: 0 4px 8px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, text-shadow 0.3s ease, opacity 0.3s ease;
        }
        .text-floating:hover {
            transform: translateY(-3px); /* 조금 더 높게 뜸 */
            opacity: 1; 
            text-shadow: 0 10px 20px rgba(0,0,0,0.6);
        }

        /* Bio Styles */
        .bio-scroll-container {
            width: 100%; height: 100%; overflow-y: auto;
            padding: 100px 20px 50px 20px;
            scrollbar-width: none; -ms-overflow-style: none;
        }
        .bio-scroll-container::-webkit-scrollbar { display: none; }
        .bio-grid-item img {
            width: 100%; aspect-ratio: 1/1; object-fit: cover;
            border-radius: 8px; margin-bottom: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="theme-dark">
    <nav class="fixed top-0 left-0 w-full z-50 flex justify-between items-center p-4 md:p-6 transition-colors duration-300">
        <div class="flex items-center gap-3 md:gap-6 pl-2 md:pl-16">
            <div class="text-floating text-lg md:text-xl font-bold tracking-widest uppercase whitespace-nowrap">
                MY PORTFOLIO
            </div>
        </div>
        
        <div class="flex flex-row gap-8 items-center mr-2"> 
            
            <a href="https://www.instagram.com/my_insta_id" target="_blank" class="text-floating flex items-center gap-3 group cursor-pointer" title="Instagram">
                <i class="fa-brands fa-instagram text-4xl"></i> <span class="text-base font-light hidden md:block group-hover:underline">Insta</span>
            </a>

            <div onclick="copyLineID('my_line_id')" class="text-floating flex items-center gap-3 group cursor-pointer" title="Click to Copy ID">
                <i class="fa-brands fa-line text-4xl"></i>
                <span class="text-base font-light hidden md:block group-hover:underline">Line</span>
            </div>

        </div>
    </nav>

    <aside class="sidebar-menu" id="sidebar-container"></aside>
    <div class="swiper swiper-container-h">
        <div class="swiper-wrapper" id="main-swiper-wrapper"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="data.js"></script>

    <script>
        // ==============================
        // [기능] 라인 아이디 복사하기
        // ==============================
        function copyLineID(id) {
            navigator.clipboard.writeText(id).then(() => {
                alert(`라인 ID가 복사되었습니다!\n(ID: ${id})`);
            }).catch(err => {
                console.error('복사 실패:', err);
                prompt("이 ID를 복사해서 친구추가 하세요:", id);
            });
        }

        const mainSwiperWrapper = document.getElementById('main-swiper-wrapper');
        const sidebarContainer = document.getElementById('sidebar-container');

        // 경로 생성 함수
        function getImagePath(folderName, fileName) {
            return `images/${folderName}/${fileName}`;
        }
        function getIconPath(fileName) {
            return `images/icons/${fileName}`;
        }

        const allCategories = [...MY_DATA.galleries];
        if (MY_DATA.bio) allCategories.push({ type: 'bio', ...MY_DATA.bio });

        allCategories.forEach((cat, index) => {
            const btn = document.createElement('button');
            btn.className = `category-btn ${index === 0 ? 'active' : ''}`;
            btn.onclick = () => swiperH.slideTo(index);
            
            if (cat.icon.startsWith('M')) {
                btn.innerHTML = `<svg viewBox="0 0 24 24"><path d="${cat.icon}"/></svg>`;
            } else {
                const iconUrl = getIconPath(cat.icon);
                btn.innerHTML = `<div class="icon-mask" style="-webkit-mask-image: url('${iconUrl}'); mask-image: url('${iconUrl}');"></div>`;
            }
            sidebarContainer.appendChild(btn);

            const hSlide = document.createElement('div');
            hSlide.className = 'swiper-slide';

            if (cat.type === 'bio') {
                const bgPath = getImagePath(cat.id, cat.backgroundImg);
                hSlide.setAttribute('data-theme', 'dark');
                hSlide.innerHTML = `
                    <div class="slide-bg" style="background-image: url('${bgPath}'); filter: blur(20px) brightness(0.5);" data-swiper-parallax="50%"></div>
                    <div class="bio-scroll-container text-white">
                        <div class="max-w-2xl mx-auto">
                            <h1 class="text-4xl font-bold mb-2 text-center" data-swiper-parallax="-300">${cat.title}</h1>
                            <p class="text-center text-gray-400 mb-12 text-sm" data-swiper-parallax="-200">${cat.subtitle}</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pb-10 text-center md:text-left" data-swiper-parallax="-100">
                                ${cat.history.map(item => `
                                    <div class="bio-grid-item flex flex-col items-center md:items-start">
                                        <img src="${getImagePath(cat.id, item.img)}" alt="${item.title}">
                                        <div class="text-xs mt-2">
                                            <div class="font-bold text-lg">${item.title}</div>
                                            <div class="text-gray-400">${item.date}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="text-center text-xs text-gray-500 pb-10">&copy; 2026 Portfolio.</div>
                        </div>
                    </div>
                `;
            } else {
                let vSlidesHTML = cat.slides.map(slide => {
                    const imgPath = getImagePath(cat.id, slide.img);
                    return `
                        <div class="swiper-slide" data-theme="${slide.theme}">
                            <div class="slide-bg" style="background-image: url('${imgPath}'); ${slide.theme==='light' ? 'filter: blur(15px) brightness(1.2);' : ''}" data-swiper-parallax="50%"></div>
                            <div class="artwork-container ${slide.ratio}">
                                <img src="${imgPath}" class="artwork-image">
                            </div>
                        </div>
                    `;
                }).join('');

                hSlide.innerHTML = `
                    <div class="swiper swiper-container-v">
                        <div class="swiper-wrapper">${vSlidesHTML}</div>
                        <div class="swiper-pagination"></div>
                    </div>
                `;
            }
            mainSwiperWrapper.appendChild(hSlide);
        });

        var swiperH = new Swiper(".swiper-container-h", {
            spaceBetween: 50, direction: 'horizontal', effect: 'slide', speed: 600,
            on: { slideChange: function () { updateActiveButton(this.activeIndex); updateThemeColor(); } }
        });

        var swiperV = new Swiper(".swiper-container-v", {
            direction: "vertical", spaceBetween: 0, mousewheel: true, parallax: true,
            speed: 1000, nested: true, touchRatio: 1.2, resistanceRatio: 0.65,
            on: { slideChange: function () { updateThemeColor(); } }
        });

        function updateActiveButton(index) {
            const btns = document.querySelectorAll('.category-btn');
            btns.forEach(b => b.classList.remove('active'));
            if(btns[index]) btns[index].classList.add('active');
        }

        function updateThemeColor() {
            const activeHSlide = document.querySelectorAll('.swiper-container-h > .swiper-wrapper > .swiper-slide')[swiperH.activeIndex];
            if (!activeHSlide) return;
            if (activeHSlide.getAttribute('data-theme')) {
                applyTheme(activeHSlide.getAttribute('data-theme')); return;
            }
            const activeVSlide = activeHSlide.querySelector('.swiper-slide-active');
            if (activeVSlide) applyTheme(activeVSlide.getAttribute('data-theme'));
        }

        function applyTheme(theme) {
            document.body.className = theme === 'light' ? 'theme-light' : 'theme-dark';
        }
        setTimeout(updateThemeColor, 100);
    </script>
</body>
</html>